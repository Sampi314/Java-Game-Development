body {
    margin: 0;
    overflow: hidden;
    background-color: #87CEEB;
    /* Sky blue */
}

#game-container {
    width: 100vw;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
}

#world {
    position: relative;
    width: 0;
    height: 0;
    /* Center the isometric view */
}

.tile {
    position: absolute;
    width: 64px;
    height: 32px;
    /* Green floor tile */
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="64" height="32" viewBox="0 0 64 32"><path d="M0 16 L32 0 L64 16 L32 32 Z" fill="%2381C784" stroke="%2366BB6A" stroke-width="1"/></svg>');
}

/* Wall on x=0 edge - faces right into the room */
.wall-left {
    height: 96px;
    transform: translateY(-64px);
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="64" height="96" viewBox="0 0 64 96"><path d="M0 80 L32 64 L64 80 L32 96 Z" fill="%2381C784" stroke="%2366BB6A" stroke-width="1"/><path d="M0 80 L32 64 L32 0 L0 16 Z" fill="%23A1887F"/><path d="M0 16 L32 0 L32 64 L0 80" stroke="%238D7A70" stroke-width="1" fill="none"/></svg>');
    z-index: 1;
}

/* Wall on y=0 edge - faces left into the room */
.wall-right {
    height: 96px;
    transform: translateY(-64px);
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="64" height="96" viewBox="0 0 64 96"><path d="M0 80 L32 64 L64 80 L32 96 Z" fill="%2381C784" stroke="%2366BB6A" stroke-width="1"/><path d="M32 64 L64 80 L64 16 L32 0 Z" fill="%238D6E63"/><path d="M32 0 L64 16 L64 80 L32 64" stroke="%237D5A50" stroke-width="1" fill="none"/></svg>');
    z-index: 1;
}

/* Corner at (0,0) - shows both wall faces */
.wall-corner {
    height: 96px;
    transform: translateY(-64px);
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="64" height="96" viewBox="0 0 64 96"><path d="M0 80 L32 64 L64 80 L32 96 Z" fill="%2381C784" stroke="%2366BB6A" stroke-width="1"/><path d="M0 80 L32 64 L32 0 L0 16 Z" fill="%23A1887F"/><path d="M32 64 L64 80 L64 16 L32 0 Z" fill="%238D6E63"/><path d="M0 16 L32 0 L32 64 L0 80" stroke="%238D7A70" stroke-width="1" fill="none"/><path d="M32 0 L64 16 L64 80 L32 64" stroke="%237D5A50" stroke-width="1" fill="none"/></svg>');
    z-index: 1;
}

/* Road tile - asphalt gray */
.road {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="64" height="32" viewBox="0 0 64 32"><path d="M0 16 L32 0 L64 16 L32 32 Z" fill="%23505050" stroke="%23404040" stroke-width="1"/></svg>');
}

/* Road with horizontal lane marking */
.road-h {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="64" height="32" viewBox="0 0 64 32"><path d="M0 16 L32 0 L64 16 L32 32 Z" fill="%23505050" stroke="%23404040" stroke-width="1"/><path d="M12 10 L20 6" stroke="%23FFD700" stroke-width="2"/><path d="M44 26 L52 22" stroke="%23FFD700" stroke-width="2"/></svg>');
}

/* Road with vertical lane marking */
.road-v {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="64" height="32" viewBox="0 0 64 32"><path d="M0 16 L32 0 L64 16 L32 32 Z" fill="%23505050" stroke="%23404040" stroke-width="1"/><path d="M12 22 L20 26" stroke="%23FFD700" stroke-width="2"/><path d="M44 6 L52 10" stroke="%23FFD700" stroke-width="2"/></svg>');
}

/* Sidewalk tile - concrete */
.sidewalk {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="64" height="32" viewBox="0 0 64 32"><path d="M0 16 L32 0 L64 16 L32 32 Z" fill="%23B0B0B0" stroke="%23909090" stroke-width="1"/><path d="M16 8 L32 16 L16 24" stroke="%23A0A0A0" stroke-width="0.5" fill="none"/><path d="M48 8 L32 16 L48 24" stroke="%23A0A0A0" stroke-width="0.5" fill="none"/></svg>');
}

/* Grass/park tile */
.grass {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="64" height="32" viewBox="0 0 64 32"><path d="M0 16 L32 0 L64 16 L32 32 Z" fill="%234CAF50" stroke="%2343A047" stroke-width="1"/></svg>');
}

/* Pedestrian crossing - x-axis road (parallel to sidewalk) */
.crossing-x {
    background: none !important;
}

.crossing-x::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    /* Diagonal \ stripes */
    background-image: linear-gradient(30deg,
            transparent 60%,
            rgba(255, 255, 255, 0.9) 60%,
            rgba(255, 255, 255, 0.9) 80%,
            transparent 80%);
    background-size: 16px 16px;
    pointer-events: none;
}

/* Pedestrian crossing - y-axis road (parallel to sidewalk) */
.crossing-y {
    background: none !important;
}

.crossing-y::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    /* Diagonal / stripes */
    background-image: linear-gradient(-30deg,
            transparent 60%,
            rgba(255, 255, 255, 0.9) 60%,
            rgba(255, 255, 255, 0.9) 80%,
            transparent 80%);
    background-size: 16px 16px;
    pointer-events: none;
}

/* 3D Isometric Table (1x1 footprint, solid legs, connected) */
.table {
    height: 64px;
    transform: translateY(-32px);
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64"><path d="M0 48 L32 32 L64 48 L32 64 Z" fill="%2381C784" stroke="%2366BB6A" stroke-width="1"/><path d="M0 48 L4 50 L4 26 L0 24 Z" fill="%23A0522D"/><path d="M4 50 L8 48 L8 24 L4 26 Z" fill="%238B4513"/><path d="M56 48 L60 50 L60 26 L56 24 Z" fill="%23A0522D"/><path d="M60 50 L64 48 L64 24 L60 26 Z" fill="%238B4513"/><path d="M28 62 L32 64 L32 40 L28 38 Z" fill="%23A0522D"/><path d="M32 64 L36 62 L36 38 L32 40 Z" fill="%238B4513"/><path d="M32 0 L64 16 L32 32 L0 16 Z" fill="%23D2691E" stroke="%23A0522D" stroke-width="1"/><path d="M0 16 L32 32 L32 40 L0 24 Z" fill="%23A0522D"/><path d="M32 32 L64 16 L64 24 L32 40 Z" fill="%23CD853F"/></svg>');
    z-index: 2;
}

/* 3D Isometric Chair - South-East (Default, Front View) */
.chair,
.chair-se {
    height: 72px;
    transform: translateY(-40px);
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="64" height="72" viewBox="0 0 64 72"><path d="M16 40 L32 32 L32 8 L16 16 Z" fill="%23D2691E" stroke="%23A0522D" stroke-width="1"/><path d="M16 40 L32 32 L48 40 L32 48 Z" fill="%23CD853F"/><path d="M16 40 L32 48 L32 52 L16 44 Z" fill="%23A0522D"/><path d="M32 48 L48 40 L48 44 L32 52 Z" fill="%238B4513"/><path d="M16 44 L20 46 L20 62 L16 60 Z" fill="%23A0522D"/><path d="M44 46 L48 44 L48 60 L44 62 Z" fill="%238B4513"/><path d="M28 50 L32 52 L32 68 L28 66 Z" fill="%23A0522D"/><path d="M32 52 L36 50 L36 66 L32 68 Z" fill="%238B4513"/></svg>');
    z-index: 2;
}

/* South-West (Mirrored SE) */
.chair-sw {
    height: 72px;
    transform: translateY(-40px) scaleX(-1);
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="64" height="72" viewBox="0 0 64 72"><path d="M16 40 L32 32 L32 8 L16 16 Z" fill="%23D2691E" stroke="%23A0522D" stroke-width="1"/><path d="M16 40 L32 32 L48 40 L32 48 Z" fill="%23CD853F"/><path d="M16 40 L32 48 L32 52 L16 44 Z" fill="%23A0522D"/><path d="M32 48 L48 40 L48 44 L32 52 Z" fill="%238B4513"/><path d="M16 44 L20 46 L20 62 L16 60 Z" fill="%23A0522D"/><path d="M44 46 L48 44 L48 60 L44 62 Z" fill="%238B4513"/><path d="M28 50 L32 52 L32 68 L28 66 Z" fill="%23A0522D"/><path d="M32 52 L36 50 L36 66 L32 68 Z" fill="%238B4513"/></svg>');
    z-index: 2;
}

/* North-West (Back View) */
.chair-nw {
    height: 72px;
    transform: translateY(-40px);
    /* Backrest closest to viewer, rising from SE edge */
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="64" height="72" viewBox="0 0 64 72"><path d="M16 56 L20 58 L20 42 L16 40 Z" fill="%23A0522D"/><path d="M44 58 L48 56 L48 40 L44 42 Z" fill="%238B4513"/><path d="M28 62 L32 64 L36 62 L36 46 L32 48 L28 46 Z" fill="%238B4513"/><path d="M16 40 L32 32 L48 40 L32 48 Z" fill="%23D2691E" stroke="%23A0522D" stroke-width="1"/><path d="M16 40 L32 48 L32 52 L16 44 Z" fill="%23A0522D"/><path d="M32 48 L48 40 L48 44 L32 52 Z" fill="%23CD853F"/><path d="M32 48 L48 40 L48 8 L32 16 Z" fill="%23D2691E" stroke="%23A0522D" stroke-width="1"/><path d="M32 48 L32 16 L28 14 L28 46 Z" fill="%23A0522D"/><path d="M28 14 L32 16 L48 8 L44 6 Z" fill="%23CD853F"/></svg>');
    z-index: 2;
}

/* North-East (Mirrored Back View) */
.chair-ne {
    height: 72px;
    transform: translateY(-40px) scaleX(-1);
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="64" height="72" viewBox="0 0 64 72"><path d="M16 56 L20 58 L20 42 L16 40 Z" fill="%23A0522D"/><path d="M44 58 L48 56 L48 40 L44 42 Z" fill="%238B4513"/><path d="M28 62 L32 64 L36 62 L36 46 L32 48 L28 46 Z" fill="%238B4513"/><path d="M16 40 L32 32 L48 40 L32 48 Z" fill="%23D2691E" stroke="%23A0522D" stroke-width="1"/><path d="M16 40 L32 48 L32 52 L16 44 Z" fill="%23A0522D"/><path d="M32 48 L48 40 L48 44 L32 52 Z" fill="%23CD853F"/><path d="M32 48 L48 40 L48 8 L32 16 Z" fill="%23D2691E" stroke="%23A0522D" stroke-width="1"/><path d="M32 48 L32 16 L28 14 L28 46 Z" fill="%23A0522D"/><path d="M28 14 L32 16 L48 8 L44 6 Z" fill="%23CD853F"/></svg>');
    z-index: 2;
}

/* Placement Highlight */
.placement-highlight {
    width: 64px;
    height: 32px;
    position: absolute;
    transform-origin: top left;
    pointer-events: none;
    z-index: 1;
    /* Above floor, below objects */
    opacity: 0.6;
}

.placement-highlight::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    transform: scaleY(0.5) rotate(45deg);
    background-color: currentColor;
    box-shadow: 0 0 10px currentColor;
}

.placement-highlight.valid {
    color: #00ff00;
}

.placement-highlight.invalid {
    color: #ff0000;
}

/* Edit Controls */
.edit-controls {
    position: absolute;
    display: flex;
    gap: 8px;
    z-index: 1000;
    pointer-events: auto;
    transform: translate(-50%, -100%);
    /* Center above object */
    margin-top: -20px;
}

.edit-btn {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    border: 2px solid white;
    background: #333;
    color: white;
    font-weight: bold;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
    transition: transform 0.1s;
}

.edit-btn:active {
    transform: scale(0.9);
}

.edit-btn.confirm {
    background: #4CAF50;
}

.edit-btn.cancel {
    background: #f44336;
}

/* Store UI */
#ui-layer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 2000;
}

#store-btn {
    pointer-events: auto;
    position: absolute;
    top: 20px;
    left: 20px;
    padding: 10px 20px;
    font-size: 18px;
    font-weight: bold;
    background-color: #FF9800;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    transition: transform 0.1s, background-color 0.2s;
}

#store-btn:hover {
    background-color: #F57C00;
}

#store-btn:active {
    transform: scale(0.95);
}

#store-menu {
    pointer-events: auto;
    position: absolute;
    top: 70px;
    left: 20px;
    background-color: white;
    padding: 15px;
    border-radius: 12px;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    min-width: 150px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

#store-menu.hidden {
    display: none;
}

#store-menu h3 {
    margin: 0 0 10px 0;
    text-align: center;
    color: #333;
    font-family: sans-serif;
}

.store-item {
    padding: 12px;
    background-color: #f5f5f5;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    cursor: pointer;
    text-align: center;
    font-weight: bold;
    color: #555;
    transition: all 0.2s;
    font-family: sans-serif;
}

.store-item:hover {
    background-color: #e3f2fd;
    border-color: #2196F3;
    color: #1976D2;
}

.store-item:active {
    transform: scale(0.98);
}

.edit-btn.rotate {
    background: #2196F3;
}

/* Invalid placement indication */
.invalid-placement {
    filter: sepia(1) hue-rotate(-50deg) saturate(5) !important;
    /* Red tint */
    opacity: 0.8;
}